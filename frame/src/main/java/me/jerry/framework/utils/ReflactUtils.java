package me.jerry.framework.utils;import java.lang.reflect.Field;import java.lang.reflect.InvocationTargetException;import java.lang.reflect.Method;/** * 反射工具类 * @author JerryGeng * */public class ReflactUtils {	/**	 * 反射获取包括指定的顶级父类层级的所有字段	 * @param clazz 待反射的类类型	 * @param rootSuper 顶级父类类型	 * @return	 */	@SuppressWarnings({ "rawtypes", "unchecked" })	public static Field[] getFieldsWithSuper(Class clazz, Class rootSuper) {		if(!rootSuper.isAssignableFrom(clazz)) {			return null;		}		Field[] fields = new Field[0];		Class temp = clazz;		do {			Field[] a = temp.getDeclaredFields();			Field[] total = new Field[fields.length + a.length];			System.arraycopy(fields, 0, total, 0, fields.length);			System.arraycopy(a, 0, total, fields.length, a.length);			fields = total;		} while((temp = temp.getSuperclass()) != rootSuper);		Field[] a = temp.getDeclaredFields();		Field[] total = new Field[fields.length + a.length];		System.arraycopy(fields, 0, total, 0, fields.length);		System.arraycopy(a, 0, total, fields.length, a.length);		fields = total;		return fields;	}	/**	 * 反射执行静态方法	 * @param clazz 目标类型	 * @param methodName 方法名	 * @param args 参数	 * @return 方法返回值	 */	@SuppressWarnings("unchecked")	public static <T> T invokeStaticMethod(Class<?> clazz, String methodName, Object... args) {		Class<?>[] types = new Class[args.length];		for(int i = 0; i < types.length; i ++) {			types[i] = args[i].getClass();		}		try {			Method method = clazz.getDeclaredMethod(methodName, types);			method.setAccessible(true);			return (T) method.invoke(null, args);		} catch (NoSuchMethodException e) {			e.printStackTrace();		} catch (IllegalAccessException e) {			e.printStackTrace();		} catch (IllegalArgumentException e) {			e.printStackTrace();		} catch (InvocationTargetException e) {			e.printStackTrace();		}		return null;	}	/**	 * 反射执行方法	 * @param receiver 目标对象	 * @param methodName 方法名	 * @param args 参数	 * @return 方法返回值	 */	@SuppressWarnings("unchecked")	public static <T> T invoke(Object receiver, String methodName, Object... args) {		Class<?>[] types = new Class[args.length];		for(int i = 0; i < types.length; i ++) {			types[i] = args[i].getClass();		}		try {			Method method = receiver.getClass().getDeclaredMethod(methodName, types);			method.setAccessible(true);			return (T) method.invoke(receiver, args);		} catch (NoSuchMethodException e) {			e.printStackTrace();		} catch (IllegalAccessException e) {			e.printStackTrace();		} catch (IllegalArgumentException e) {			e.printStackTrace();		} catch (InvocationTargetException e) {			e.printStackTrace();		}		return null;	}	/**	 * 反射获取属性值	 * @param clazz 待反射的类类型	 * @param receiver 目标对象	 * @param fieldName 属性名称	 * @return	 */	@SuppressWarnings("unchecked")	public static <T> T getFieldValue(Class<?> clazz, Object receiver, String fieldName) {		Field field;		try {			field = clazz.getDeclaredField(fieldName);			field.setAccessible(true);			return (T)field.get(receiver);		} catch (NoSuchFieldException e) {			e.printStackTrace();		} catch (IllegalAccessException e) {			e.printStackTrace();		} catch (IllegalArgumentException e) {			e.printStackTrace();		}		return null;	}	/**	 * 反射获取静态属性值	 * @param clazz 待反射的类类型	 * @param fieldName 属性名称	 * @return	 */	@SuppressWarnings("unchecked")	public static <T> T getStaticFieldValue(Class<?> clazz, String fieldName) {		Field field;		try {			field = clazz.getDeclaredField(fieldName);			field.setAccessible(true);			return (T)field.get(null);		} catch (NoSuchFieldException e) {			e.printStackTrace();		} catch (IllegalAccessException e) {			e.printStackTrace();		} catch (IllegalArgumentException e) {			e.printStackTrace();		}		return null;	}	/**	 * 反射设置属性值	 * @param clazz 待反射的类类型	 * @param receiver 目标对象	 * @param fieldName 属性名称	 * @param value 目标值	 */	public static void setFieldValue(Class<?> clazz, Object receiver, String fieldName, Object value) {		Field field;		try {			field = clazz.getDeclaredField(fieldName);			field.setAccessible(true);			field.set(receiver, value);		} catch (NoSuchFieldException e) {			e.printStackTrace();		} catch (IllegalAccessException e) {			e.printStackTrace();		} catch (IllegalArgumentException e) {			e.printStackTrace();		}	}	/**	 * 反射设置静态属性值	 * @param clazz 待反射的类类型	 * @param fieldName 属性名称	 * @param value 目标值	 */	public static void setStaticFieldValue(Class<?> clazz, String fieldName, Object value) {		Field field;		try {			field = clazz.getDeclaredField(fieldName);			field.setAccessible(true);			field.set(null, value);		} catch (NoSuchFieldException e) {			e.printStackTrace();		} catch (IllegalAccessException e) {			e.printStackTrace();		} catch (IllegalArgumentException e) {			e.printStackTrace();		}	}}